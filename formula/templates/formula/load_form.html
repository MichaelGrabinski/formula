{% extends 'admin/base.html' %}
{% load i18n unfold %}

{% block content %}
<div class="flex flex-col gap-4">
    <div class="flex flex-row items-center">
        <h2 class="text-xl font-semibold flex-1">{% trans "Create or Update Load" %}</h2>
    </div>

        {% component "unfold/components/card.html" %}
                <form method="post" class="flex flex-col gap-4" enctype="multipart/form-data">{% csrf_token %}
            {{ form.as_p }}
            <div class="flex justify-end gap-2">
                {% component "unfold/components/button.html" with submit=1 variant="primary" %}{% trans "Save" %}{% endcomponent %}
            </div>
        </form>
    {% endcomponent %}

        {% if object %}
        {% component "unfold/components/card.html" %}
            <div class="p-4">
                <div class="flex items-center justify-between mb-3">
                    <h3 class="font-medium">{% trans "Documents" %}</h3>
                    <form method="post" enctype="multipart/form-data" class="flex items-center gap-2">
                        {% csrf_token %}
                        <input type="hidden" name="upload_for" value="document" />
                        <input type="file" name="file" class="file-input file-input-sm" accept=".pdf,.png,.jpg,.jpeg" />
                        <input type="text" name="name" class="input input-sm" placeholder="{% trans 'Name (optional)' %}" />
                        {% component "unfold/components/button.html" with submit=1 size="sm" %}{% trans "Upload" %}{% endcomponent %}
                    </form>
                </div>
                <ul class="space-y-2">
                    {% for d in documents %}
                    <li class="flex items-center justify-between border rounded p-2">
                        <div>
                            <div class="font-medium">{{ d.name }}</div>
                            <div class="text-xs text-muted-foreground">{{ d.category_display }} Â· {{ d.uploaded_at }}</div>
                        </div>
                        <a class="underline" href="{{ d.file.url }}" target="_blank">{% trans "View" %}</a>
                    </li>
                    {% empty %}
                    <li class="text-sm text-muted-foreground">{% trans "No documents yet." %}</li>
                    {% endfor %}
                </ul>
            </div>
        {% endcomponent %}
        {% endif %}
</div>
{% endblock %}
